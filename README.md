# Тестовое задание  "Менеджер задач" с тестами

## Функциональные требования
CRUD операции для управления задачами (create, get, get_list, update, delete),
где модель задачи состоит из uuid, названия, описания, статусов: создано, в работе,
заверешено.

# Комментарий по задаче
Архитектура должна быть настолько простой, насколько это возможно, но не проще.

В задаче ничего не указано про базу и реализацию api, поэтому минимально реализуемый
проект положил в v1. 
Так как всеже задача показать минимальные возможности своей работы, создал v2 с 
хранилищем, коментариями (можно добавить Args, Returns для более подробного
описания функций и методов), хранилища и Docker файлов.
Так как в задаче ничего не указано про базу данных, реализовал просто словарь в памяти
Легко меняется на базу данных, в main.py просто меняем storage.

# Cтруктура проекта
```
v2/
├── main.py # FastAPI приложение
├── models.py # Pydantic модели
├── storage.py # In-memory хранилище
├── test_2_main.py # Тесты
├── pyproject.toml # Зависимости проекта
├── uv.lock # Файл блокировки зависимостей
├── Dockerfile # Docker образ
└── README.md # Документация
```

#### Запуск всего проекта
```bash
# Docker Compose сам соберет образ и запустит все
docker-compose up --build

# Или если образ уже есть
docker-compose up
```

#### Запуск по отдельности
```bash
# Только приложение (с автоматической сборкой)
docker-compose up app --build

# Только тесты
docker-compose run test

# Все вместе
docker-compose up --build
```

## API Endpoints

### Создание задачи

```bash
POST /tasks/
Content-Type: application/json

{
  "name": "Название задачи",
  "description": "Описание задачи"
}
```

**Ответ:**
```json
{
  "id": "uuid-123",
  "name": "Название задачи",
  "description": "Описание задачи",
  "status": "created"
}
```

### Получение задачи по ID

```bash
GET /tasks/{task_id}
```

**Ответ:**
```json
{
  "id": "uuid-123",
  "name": "Название задачи",
  "description": "Описание задачи",
  "status": "created"
}
```

### Получение всех задач

```bash
GET /tasks/
```

**Ответ:**
```json
[
  {
    "id": "uuid-123",
    "name": "Задача 1",
    "description": "Описание 1",
    "status": "created"
  },
  {
    "id": "uuid-456",
    "name": "Задача 2",
    "description": "Описание 2",
    "status": "in_progress"
  }
]
```

### Обновление задачи

```bash
PUT /tasks/{task_id}
Content-Type: application/json

{
  "name": "Новое название",
  "status": "done"
}
```

**Ответ:**
```json
{
  "id": "uuid-123",
  "name": "Новое название",
  "description": "Описание задачи",
  "status": "done"
}
```

### Удаление задачи

```bash
DELETE /tasks/{task_id}
```

**Ответ:**
```json
{
  "message": "Задача удалена"
}
```

### Корневой эндпоинт

```bash
GET /
```

**Ответ:**
```json
{
  "message": "Task Manager API"
}
```

## Тестирование

### Запуск тестов

```bash
uv run pytest test_2_main.py -v
```

### Структура тестов

Тесты организованы по функциональности:

- **`TestTaskCreation`** - тесты создания задач
  - Позитивный: успешное создание
  - Негативный: валидация данных
  - Пустой: граничные случаи

- **`TestTaskRetrieval`** - тесты получения задач
  - Позитивный: получение одной  
  - Позитивный: получение всех задач
  - Негативный: несуществующие задачи
  - Пустой: пустой список

- **`TestTaskUpdate`** - тесты обновления задач
  - Позитивный: успешное обновление
  - Негативный: несуществующие задачи
  - Пустой: валидация данных

- **`TestTaskDeletion`** - тесты удаления задач
  - Позитивный: успешное удаление
  - Негативный: несуществующие задачи

- **`TestRootEndpoint`** - тесты корневого эндпоинта

## Swagger документация

После запуска приложения документация доступна по адресу:
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

